{% extends "base.html" %}
{% load help_tags %}
{% block title %}Permissions — Open GRC{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h2>Permissions</h2>
</div>
{% help_modal "accounts.permission_list" %}

{% for mod_key, mod_data in grouped_permissions.items %}
<div class="card mb-4">
  <div class="card-header"><strong>{{ mod_data.label }}</strong></div>
  <div class="card-body p-0">
    {% for feat_key, feat_data in mod_data.features.items %}
    <div class="px-3 py-2 {% if not forloop.last %}border-bottom{% endif %}">
      <h6 class="mb-2">{{ feat_data.label }}</h6>
      <div class="d-flex flex-wrap gap-2">
        {% for perm in feat_data.permissions %}
        <span class="badge bg-light text-dark border"><code>{{ perm.codename }}</code> — {{ perm.get_action_display }}</span>
        {% endfor %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% empty %}
<div class="alert alert-info">Aucune permission définie.</div>
{% endfor %}
{% endblock %}
