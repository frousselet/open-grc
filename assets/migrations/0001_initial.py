# Generated by Django 6.0.2 on 2026-02-27 10:32

import django.db.models.deletion
import simple_history.models
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('context', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='EssentialAsset',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Date de modification')),
                ('reference', models.CharField(max_length=50, unique=True, verbose_name='Référence')),
                ('name', models.CharField(max_length=255, verbose_name='Nom')),
                ('description', models.TextField(blank=True, default='', verbose_name='Description')),
                ('type', models.CharField(choices=[('business_process', 'Processus métier'), ('information', 'Information')], max_length=20, verbose_name='Type')),
                ('category', models.CharField(choices=[('core_process', 'Processus cœur de métier'), ('support_process', 'Processus support'), ('management_process', 'Processus de management'), ('strategic_data', 'Données stratégiques'), ('operational_data', 'Données opérationnelles'), ('personal_data', 'Données personnelles'), ('financial_data', 'Données financières'), ('technical_data', 'Données techniques'), ('legal_data', 'Données juridiques'), ('research_data', 'Données de recherche'), ('commercial_data', 'Données commerciales')], max_length=30, verbose_name='Catégorie')),
                ('confidentiality_level', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], default=2, verbose_name='Confidentialité')),
                ('integrity_level', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], default=2, verbose_name='Intégrité')),
                ('availability_level', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], default=2, verbose_name='Disponibilité')),
                ('confidentiality_justification', models.TextField(blank=True, default='', verbose_name='Justification confidentialité')),
                ('integrity_justification', models.TextField(blank=True, default='', verbose_name='Justification intégrité')),
                ('availability_justification', models.TextField(blank=True, default='', verbose_name='Justification disponibilité')),
                ('max_tolerable_downtime', models.CharField(blank=True, default='', max_length=100, verbose_name='DMIT / MTD')),
                ('recovery_time_objective', models.CharField(blank=True, default='', max_length=100, verbose_name='RTO')),
                ('recovery_point_objective', models.CharField(blank=True, default='', max_length=100, verbose_name='RPO')),
                ('data_classification', models.CharField(blank=True, choices=[('public', 'Public'), ('internal', 'Interne'), ('confidential', 'Confidentiel'), ('restricted', 'Restreint'), ('secret', 'Secret')], default='', max_length=20, verbose_name='Classification')),
                ('personal_data', models.BooleanField(default=False, verbose_name='Données personnelles')),
                ('personal_data_categories', models.JSONField(blank=True, null=True, verbose_name='Catégories RGPD')),
                ('regulatory_constraints', models.TextField(blank=True, default='', verbose_name='Contraintes réglementaires')),
                ('status', models.CharField(choices=[('identified', 'Identifié'), ('active', 'Actif'), ('under_review', 'En cours de revue'), ('decommissioned', 'Décommissionné')], default='identified', max_length=20, verbose_name='Statut')),
                ('review_date', models.DateField(blank=True, null=True, verbose_name='Prochaine date de revue')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('custodian', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='custodian_essential_assets', to=settings.AUTH_USER_MODEL, verbose_name='Dépositaire')),
                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='owned_essential_assets', to=settings.AUTH_USER_MODEL, verbose_name='Propriétaire')),
                ('related_activities', models.ManyToManyField(blank=True, related_name='essential_assets', to='context.activity', verbose_name='Activités métier')),
                ('scope', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_set', to='context.scope', verbose_name='Périmètre')),
            ],
            options={
                'verbose_name': 'Bien essentiel',
                'verbose_name_plural': 'Biens essentiels',
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='AssetValuation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('evaluation_date', models.DateField(verbose_name="Date d'évaluation")),
                ('confidentiality_level', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], verbose_name='Confidentialité')),
                ('integrity_level', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], verbose_name='Intégrité')),
                ('availability_level', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], verbose_name='Disponibilité')),
                ('justification', models.TextField(blank=True, default='', verbose_name='Justification')),
                ('context', models.TextField(blank=True, default='', verbose_name='Contexte')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('evaluated_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='asset_valuations', to=settings.AUTH_USER_MODEL, verbose_name='Évaluateur')),
                ('essential_asset', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='valuations', to='assets.essentialasset', verbose_name='Bien essentiel')),
            ],
            options={
                'verbose_name': 'Valorisation DIC',
                'verbose_name_plural': 'Valorisations DIC',
                'ordering': ['-evaluation_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='HistoricalAssetGroup',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(blank=True, editable=False, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(blank=True, editable=False, verbose_name='Date de modification')),
                ('name', models.CharField(max_length=255, verbose_name='Nom')),
                ('description', models.TextField(blank=True, default='', verbose_name='Description')),
                ('type', models.CharField(choices=[('hardware', 'Matériel'), ('software', 'Logiciel'), ('network', 'Réseau'), ('person', 'Personne'), ('site', 'Site'), ('service', 'Service'), ('paper', 'Papier')], max_length=20, verbose_name='Type')),
                ('status', models.CharField(choices=[('active', 'Actif'), ('inactive', 'Inactif')], default='active', max_length=20, verbose_name='Statut')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('created_by', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('owner', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Responsable')),
                ('scope', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='context.scope', verbose_name='Périmètre')),
            ],
            options={
                'verbose_name': "historical Groupe d'actifs",
                'verbose_name_plural': "historical Groupes d'actifs",
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalEssentialAsset',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(blank=True, editable=False, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(blank=True, editable=False, verbose_name='Date de modification')),
                ('reference', models.CharField(db_index=True, max_length=50, verbose_name='Référence')),
                ('name', models.CharField(max_length=255, verbose_name='Nom')),
                ('description', models.TextField(blank=True, default='', verbose_name='Description')),
                ('type', models.CharField(choices=[('business_process', 'Processus métier'), ('information', 'Information')], max_length=20, verbose_name='Type')),
                ('category', models.CharField(choices=[('core_process', 'Processus cœur de métier'), ('support_process', 'Processus support'), ('management_process', 'Processus de management'), ('strategic_data', 'Données stratégiques'), ('operational_data', 'Données opérationnelles'), ('personal_data', 'Données personnelles'), ('financial_data', 'Données financières'), ('technical_data', 'Données techniques'), ('legal_data', 'Données juridiques'), ('research_data', 'Données de recherche'), ('commercial_data', 'Données commerciales')], max_length=30, verbose_name='Catégorie')),
                ('confidentiality_level', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], default=2, verbose_name='Confidentialité')),
                ('integrity_level', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], default=2, verbose_name='Intégrité')),
                ('availability_level', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], default=2, verbose_name='Disponibilité')),
                ('confidentiality_justification', models.TextField(blank=True, default='', verbose_name='Justification confidentialité')),
                ('integrity_justification', models.TextField(blank=True, default='', verbose_name='Justification intégrité')),
                ('availability_justification', models.TextField(blank=True, default='', verbose_name='Justification disponibilité')),
                ('max_tolerable_downtime', models.CharField(blank=True, default='', max_length=100, verbose_name='DMIT / MTD')),
                ('recovery_time_objective', models.CharField(blank=True, default='', max_length=100, verbose_name='RTO')),
                ('recovery_point_objective', models.CharField(blank=True, default='', max_length=100, verbose_name='RPO')),
                ('data_classification', models.CharField(blank=True, choices=[('public', 'Public'), ('internal', 'Interne'), ('confidential', 'Confidentiel'), ('restricted', 'Restreint'), ('secret', 'Secret')], default='', max_length=20, verbose_name='Classification')),
                ('personal_data', models.BooleanField(default=False, verbose_name='Données personnelles')),
                ('personal_data_categories', models.JSONField(blank=True, null=True, verbose_name='Catégories RGPD')),
                ('regulatory_constraints', models.TextField(blank=True, default='', verbose_name='Contraintes réglementaires')),
                ('status', models.CharField(choices=[('identified', 'Identifié'), ('active', 'Actif'), ('under_review', 'En cours de revue'), ('decommissioned', 'Décommissionné')], default='identified', max_length=20, verbose_name='Statut')),
                ('review_date', models.DateField(blank=True, null=True, verbose_name='Prochaine date de revue')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('created_by', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('custodian', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Dépositaire')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('owner', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Propriétaire')),
                ('scope', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='context.scope', verbose_name='Périmètre')),
            ],
            options={
                'verbose_name': 'historical Bien essentiel',
                'verbose_name_plural': 'historical Biens essentiels',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='SupportAsset',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Date de modification')),
                ('reference', models.CharField(max_length=50, unique=True, verbose_name='Référence')),
                ('name', models.CharField(max_length=255, verbose_name='Nom')),
                ('description', models.TextField(blank=True, default='', verbose_name='Description')),
                ('type', models.CharField(choices=[('hardware', 'Matériel'), ('software', 'Logiciel'), ('network', 'Réseau'), ('person', 'Personne'), ('site', 'Site'), ('service', 'Service'), ('paper', 'Papier')], max_length=20, verbose_name='Type')),
                ('category', models.CharField(choices=[('server', 'Serveur'), ('workstation', 'Poste de travail'), ('laptop', 'Ordinateur portable'), ('mobile_device', 'Appareil mobile'), ('network_equipment', 'Équipement réseau'), ('storage', 'Stockage'), ('peripheral', 'Périphérique'), ('iot_device', 'Objet connecté (IoT)'), ('removable_media', 'Support amovible'), ('other_hardware', 'Autre matériel'), ('operating_system', "Système d'exploitation"), ('database', 'Base de données'), ('application', 'Application'), ('middleware', 'Middleware'), ('security_tool', 'Outil de sécurité'), ('development_tool', 'Outil de développement'), ('saas_application', 'Application SaaS'), ('other_software', 'Autre logiciel'), ('lan', 'Réseau local (LAN)'), ('wan', 'Réseau étendu (WAN)'), ('wifi', 'Wi-Fi'), ('vpn', 'VPN'), ('internet_link', 'Lien Internet'), ('firewall_zone', 'Zone pare-feu'), ('dmz', 'DMZ'), ('other_network', 'Autre réseau'), ('internal_staff', 'Personnel interne'), ('contractor', 'Prestataire'), ('external_provider', 'Fournisseur externe'), ('administrator', 'Administrateur'), ('developer', 'Développeur'), ('other_person', 'Autre personne'), ('datacenter', 'Centre de données'), ('office', 'Bureau'), ('remote_site', 'Site distant'), ('cloud_region', 'Région cloud'), ('other_site', 'Autre site'), ('cloud_service', 'Service cloud'), ('hosting_service', "Service d'hébergement"), ('managed_service', 'Service managé'), ('telecom_service', 'Service télécom'), ('outsourced_service', 'Service externalisé'), ('other_service', 'Autre service'), ('archive', 'Archive'), ('printed_document', 'Document imprimé'), ('form', 'Formulaire'), ('other_paper', 'Autre papier')], max_length=30, verbose_name='Catégorie')),
                ('location', models.CharField(blank=True, default='', max_length=255, verbose_name='Localisation')),
                ('manufacturer', models.CharField(blank=True, default='', max_length=255, verbose_name='Fabricant / éditeur')),
                ('model_name', models.CharField(blank=True, default='', max_length=255, verbose_name='Modèle / version')),
                ('serial_number', models.CharField(blank=True, default='', max_length=255, verbose_name='Numéro de série')),
                ('version', models.CharField(blank=True, default='', max_length=100, verbose_name='Version')),
                ('ip_address', models.CharField(blank=True, default='', max_length=45, verbose_name='Adresse IP')),
                ('hostname', models.CharField(blank=True, default='', max_length=255, verbose_name="Nom d'hôte")),
                ('operating_system', models.CharField(blank=True, default='', max_length=255, verbose_name="Système d'exploitation")),
                ('acquisition_date', models.DateField(blank=True, null=True, verbose_name="Date d'acquisition")),
                ('end_of_life_date', models.DateField(blank=True, null=True, verbose_name='Date de fin de vie')),
                ('warranty_expiry_date', models.DateField(blank=True, null=True, verbose_name='Expiration garantie')),
                ('contract_reference', models.CharField(blank=True, default='', max_length=255, verbose_name='Référence contrat')),
                ('inherited_confidentiality', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], default=0, verbose_name='Confidentialité héritée')),
                ('inherited_integrity', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], default=0, verbose_name='Intégrité héritée')),
                ('inherited_availability', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], default=0, verbose_name='Disponibilité héritée')),
                ('exposure_level', models.CharField(blank=True, choices=[('internal', 'Interne'), ('exposed', 'Exposé'), ('internet_facing', 'Exposé Internet'), ('dmz', 'DMZ')], default='', max_length=20, verbose_name="Niveau d'exposition")),
                ('environment', models.CharField(blank=True, choices=[('production', 'Production'), ('staging', 'Pré-production'), ('development', 'Développement'), ('test', 'Test'), ('disaster_recovery', "Reprise d'activité")], default='', max_length=20, verbose_name='Environnement')),
                ('status', models.CharField(choices=[('in_stock', 'En stock'), ('deployed', 'Déployé'), ('active', 'Actif'), ('under_maintenance', 'En maintenance'), ('decommissioned', 'Décommissionné'), ('disposed', 'Éliminé')], default='active', max_length=20, verbose_name='Statut')),
                ('review_date', models.DateField(blank=True, null=True, verbose_name='Prochaine date de revue')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('custodian', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='custodian_support_assets', to=settings.AUTH_USER_MODEL, verbose_name='Dépositaire')),
                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='owned_support_assets', to=settings.AUTH_USER_MODEL, verbose_name='Propriétaire')),
                ('parent_asset', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='assets.supportasset', verbose_name='Bien support parent')),
                ('scope', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_set', to='context.scope', verbose_name='Périmètre')),
            ],
            options={
                'verbose_name': 'Bien support',
                'verbose_name_plural': 'Biens supports',
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='HistoricalSupportAsset',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(blank=True, editable=False, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(blank=True, editable=False, verbose_name='Date de modification')),
                ('reference', models.CharField(db_index=True, max_length=50, verbose_name='Référence')),
                ('name', models.CharField(max_length=255, verbose_name='Nom')),
                ('description', models.TextField(blank=True, default='', verbose_name='Description')),
                ('type', models.CharField(choices=[('hardware', 'Matériel'), ('software', 'Logiciel'), ('network', 'Réseau'), ('person', 'Personne'), ('site', 'Site'), ('service', 'Service'), ('paper', 'Papier')], max_length=20, verbose_name='Type')),
                ('category', models.CharField(choices=[('server', 'Serveur'), ('workstation', 'Poste de travail'), ('laptop', 'Ordinateur portable'), ('mobile_device', 'Appareil mobile'), ('network_equipment', 'Équipement réseau'), ('storage', 'Stockage'), ('peripheral', 'Périphérique'), ('iot_device', 'Objet connecté (IoT)'), ('removable_media', 'Support amovible'), ('other_hardware', 'Autre matériel'), ('operating_system', "Système d'exploitation"), ('database', 'Base de données'), ('application', 'Application'), ('middleware', 'Middleware'), ('security_tool', 'Outil de sécurité'), ('development_tool', 'Outil de développement'), ('saas_application', 'Application SaaS'), ('other_software', 'Autre logiciel'), ('lan', 'Réseau local (LAN)'), ('wan', 'Réseau étendu (WAN)'), ('wifi', 'Wi-Fi'), ('vpn', 'VPN'), ('internet_link', 'Lien Internet'), ('firewall_zone', 'Zone pare-feu'), ('dmz', 'DMZ'), ('other_network', 'Autre réseau'), ('internal_staff', 'Personnel interne'), ('contractor', 'Prestataire'), ('external_provider', 'Fournisseur externe'), ('administrator', 'Administrateur'), ('developer', 'Développeur'), ('other_person', 'Autre personne'), ('datacenter', 'Centre de données'), ('office', 'Bureau'), ('remote_site', 'Site distant'), ('cloud_region', 'Région cloud'), ('other_site', 'Autre site'), ('cloud_service', 'Service cloud'), ('hosting_service', "Service d'hébergement"), ('managed_service', 'Service managé'), ('telecom_service', 'Service télécom'), ('outsourced_service', 'Service externalisé'), ('other_service', 'Autre service'), ('archive', 'Archive'), ('printed_document', 'Document imprimé'), ('form', 'Formulaire'), ('other_paper', 'Autre papier')], max_length=30, verbose_name='Catégorie')),
                ('location', models.CharField(blank=True, default='', max_length=255, verbose_name='Localisation')),
                ('manufacturer', models.CharField(blank=True, default='', max_length=255, verbose_name='Fabricant / éditeur')),
                ('model_name', models.CharField(blank=True, default='', max_length=255, verbose_name='Modèle / version')),
                ('serial_number', models.CharField(blank=True, default='', max_length=255, verbose_name='Numéro de série')),
                ('version', models.CharField(blank=True, default='', max_length=100, verbose_name='Version')),
                ('ip_address', models.CharField(blank=True, default='', max_length=45, verbose_name='Adresse IP')),
                ('hostname', models.CharField(blank=True, default='', max_length=255, verbose_name="Nom d'hôte")),
                ('operating_system', models.CharField(blank=True, default='', max_length=255, verbose_name="Système d'exploitation")),
                ('acquisition_date', models.DateField(blank=True, null=True, verbose_name="Date d'acquisition")),
                ('end_of_life_date', models.DateField(blank=True, null=True, verbose_name='Date de fin de vie')),
                ('warranty_expiry_date', models.DateField(blank=True, null=True, verbose_name='Expiration garantie')),
                ('contract_reference', models.CharField(blank=True, default='', max_length=255, verbose_name='Référence contrat')),
                ('inherited_confidentiality', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], default=0, verbose_name='Confidentialité héritée')),
                ('inherited_integrity', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], default=0, verbose_name='Intégrité héritée')),
                ('inherited_availability', models.IntegerField(choices=[(0, 'Négligeable'), (1, 'Faible'), (2, 'Moyen'), (3, 'Élevé'), (4, 'Critique')], default=0, verbose_name='Disponibilité héritée')),
                ('exposure_level', models.CharField(blank=True, choices=[('internal', 'Interne'), ('exposed', 'Exposé'), ('internet_facing', 'Exposé Internet'), ('dmz', 'DMZ')], default='', max_length=20, verbose_name="Niveau d'exposition")),
                ('environment', models.CharField(blank=True, choices=[('production', 'Production'), ('staging', 'Pré-production'), ('development', 'Développement'), ('test', 'Test'), ('disaster_recovery', "Reprise d'activité")], default='', max_length=20, verbose_name='Environnement')),
                ('status', models.CharField(choices=[('in_stock', 'En stock'), ('deployed', 'Déployé'), ('active', 'Actif'), ('under_maintenance', 'En maintenance'), ('decommissioned', 'Décommissionné'), ('disposed', 'Éliminé')], default='active', max_length=20, verbose_name='Statut')),
                ('review_date', models.DateField(blank=True, null=True, verbose_name='Prochaine date de revue')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('created_by', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('custodian', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Dépositaire')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('owner', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Propriétaire')),
                ('scope', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='context.scope', verbose_name='Périmètre')),
                ('parent_asset', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='assets.supportasset', verbose_name='Bien support parent')),
            ],
            options={
                'verbose_name': 'historical Bien support',
                'verbose_name_plural': 'historical Biens supports',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalAssetDependency',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('dependency_type', models.CharField(choices=[('runs_on', 'Fonctionne sur'), ('stored_in', 'Stocké dans'), ('transmitted_by', 'Transmis par'), ('managed_by', 'Géré par'), ('hosted_at', 'Hébergé à'), ('protected_by', 'Protégé par'), ('other', 'Autre')], max_length=20, verbose_name='Type de dépendance')),
                ('criticality', models.CharField(choices=[('low', 'Faible'), ('medium', 'Moyen'), ('high', 'Élevé'), ('critical', 'Critique')], max_length=20, verbose_name='Criticité')),
                ('description', models.TextField(blank=True, default='', verbose_name='Description')),
                ('is_single_point_of_failure', models.BooleanField(default=False, verbose_name='Point unique de défaillance (SPOF)')),
                ('redundancy_level', models.CharField(blank=True, choices=[('none', 'Aucune'), ('partial', 'Partielle'), ('full', 'Complète')], default='', max_length=20, verbose_name='Niveau de redondance')),
                ('created_at', models.DateTimeField(blank=True, editable=False, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(blank=True, editable=False, verbose_name='Date de modification')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('created_by', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('essential_asset', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='assets.essentialasset', verbose_name='Bien essentiel')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('support_asset', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='assets.supportasset', verbose_name='Bien support')),
            ],
            options={
                'verbose_name': 'historical Relation de dépendance',
                'verbose_name_plural': 'historical Relations de dépendance',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='AssetGroup',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Date de modification')),
                ('name', models.CharField(max_length=255, verbose_name='Nom')),
                ('description', models.TextField(blank=True, default='', verbose_name='Description')),
                ('type', models.CharField(choices=[('hardware', 'Matériel'), ('software', 'Logiciel'), ('network', 'Réseau'), ('person', 'Personne'), ('site', 'Site'), ('service', 'Service'), ('paper', 'Papier')], max_length=20, verbose_name='Type')),
                ('status', models.CharField(choices=[('active', 'Actif'), ('inactive', 'Inactif')], default='active', max_length=20, verbose_name='Statut')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('owner', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='owned_asset_groups', to=settings.AUTH_USER_MODEL, verbose_name='Responsable')),
                ('scope', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_set', to='context.scope', verbose_name='Périmètre')),
                ('members', models.ManyToManyField(blank=True, related_name='groups', to='assets.supportasset', verbose_name='Membres')),
            ],
            options={
                'verbose_name': "Groupe d'actifs",
                'verbose_name_plural': "Groupes d'actifs",
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='AssetDependency',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('dependency_type', models.CharField(choices=[('runs_on', 'Fonctionne sur'), ('stored_in', 'Stocké dans'), ('transmitted_by', 'Transmis par'), ('managed_by', 'Géré par'), ('hosted_at', 'Hébergé à'), ('protected_by', 'Protégé par'), ('other', 'Autre')], max_length=20, verbose_name='Type de dépendance')),
                ('criticality', models.CharField(choices=[('low', 'Faible'), ('medium', 'Moyen'), ('high', 'Élevé'), ('critical', 'Critique')], max_length=20, verbose_name='Criticité')),
                ('description', models.TextField(blank=True, default='', verbose_name='Description')),
                ('is_single_point_of_failure', models.BooleanField(default=False, verbose_name='Point unique de défaillance (SPOF)')),
                ('redundancy_level', models.CharField(blank=True, choices=[('none', 'Aucune'), ('partial', 'Partielle'), ('full', 'Complète')], default='', max_length=20, verbose_name='Niveau de redondance')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Date de modification')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_dependencies', to=settings.AUTH_USER_MODEL, verbose_name='Créé par')),
                ('essential_asset', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dependencies_as_essential', to='assets.essentialasset', verbose_name='Bien essentiel')),
                ('support_asset', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dependencies_as_support', to='assets.supportasset', verbose_name='Bien support')),
            ],
            options={
                'verbose_name': 'Relation de dépendance',
                'verbose_name_plural': 'Relations de dépendance',
                'ordering': ['-created_at'],
                'constraints': [models.UniqueConstraint(fields=('essential_asset', 'support_asset'), name='unique_asset_dependency')],
            },
        ),
    ]
