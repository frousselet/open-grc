{% extends "base.html" %}
{% load i18n %}

{% block title %}{{ mapping }} — Open GRC{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1>{% blocktrans with mapping=mapping %}Mapping: {{ mapping }}{% endblocktrans %}</h1>
  <div class="d-flex gap-2">
    <a href="{% url 'compliance:mapping-update' mapping.pk %}" class="btn btn-primary">{% trans "Edit" %}</a>
    <a href="{% url 'compliance:mapping-list' %}" class="btn btn-outline-secondary">{% trans "Back" %}</a>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <dl class="row mb-0">
      <dt class="col-sm-3" style="color:var(--text-muted);font-size:.82rem">{% trans "Source requirement" %}</dt>
      <dd class="col-sm-9">
        <a href="{% url 'compliance:requirement-detail' mapping.source_requirement.pk %}" style="text-decoration:none"><span style="color:var(--text-muted);font-size:.82rem;font-weight:500">{{ mapping.source_requirement.reference }}</span> <span style="color:var(--accent);font-weight:500">{{ mapping.source_requirement.name }}</span></a>
        <span style="color:var(--text-muted)">({{ mapping.source_requirement.framework.short_name|default:mapping.source_requirement.framework.name }})</span>
      </dd>

      <dt class="col-sm-3" style="color:var(--text-muted);font-size:.82rem">{% trans "Target requirement" %}</dt>
      <dd class="col-sm-9">
        <a href="{% url 'compliance:requirement-detail' mapping.target_requirement.pk %}" style="text-decoration:none"><span style="color:var(--text-muted);font-size:.82rem;font-weight:500">{{ mapping.target_requirement.reference }}</span> <span style="color:var(--accent);font-weight:500">{{ mapping.target_requirement.name }}</span></a>
        <span style="color:var(--text-muted)">({{ mapping.target_requirement.framework.short_name|default:mapping.target_requirement.framework.name }})</span>
      </dd>

      <dt class="col-sm-3" style="color:var(--text-muted);font-size:.82rem">{% trans "Mapping type" %}</dt><dd class="col-sm-9">{{ mapping.get_mapping_type_display }}</dd>
      <dt class="col-sm-3" style="color:var(--text-muted);font-size:.82rem">{% trans "Coverage level" %}</dt><dd class="col-sm-9">{{ mapping.get_coverage_level_display|default:"—" }}</dd>
      <dt class="col-sm-3" style="color:var(--text-muted);font-size:.82rem">{% trans "Description" %}</dt><dd class="col-sm-9">{{ mapping.description|default:"—"|linebreaksbr }}</dd>
      <dt class="col-sm-3" style="color:var(--text-muted);font-size:.82rem">{% trans "Justification" %}</dt><dd class="col-sm-9">{{ mapping.justification|default:"—"|linebreaksbr }}</dd>
      <dt class="col-sm-3" style="color:var(--text-muted);font-size:.82rem">{% trans "Created by" %}</dt><dd class="col-sm-9">{{ mapping.created_by|default:"—" }}</dd>
      <dt class="col-sm-3" style="color:var(--text-muted);font-size:.82rem">{% trans "Creation date" %}</dt><dd class="col-sm-9">{{ mapping.created_at|date:"d/m/Y H:i" }}</dd>
    </dl>
  </div>
</div>
{% endblock %}
